<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reshka - Handsfree Transcription</title>

    <!-- Favicon - futuristic audio waveform -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 64 64%22><defs><clipPath id=%22c%22><rect width=%2264%22 height=%2264%22 rx=%2216%22/></clipPath><filter id=%22gl%22><feGaussianBlur stdDeviation=%223%22/></filter></defs><rect width=%2264%22 height=%2264%22 rx=%2216%22 fill=%22%23080810%22/><g clip-path=%22url(%23c)%22><path d=%22M6 32 C9 32 10 26 13 26 S17 38 19 38 S22 20 25 20 S28 44 30 44 S33 14 36 14 S39 48 41 48 S44 22 47 22 S50 40 52 40 S55 28 58 28 L60 32%22 stroke=%22%2300e5ff%22 stroke-width=%224.5%22 fill=%22none%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22 filter=%22url(%23gl)%22 opacity=%22.8%22/><path d=%22M6 32 C9 32 10 26 13 26 S17 38 19 38 S22 20 25 20 S28 44 30 44 S33 14 36 14 S39 48 41 48 S44 22 47 22 S50 40 52 40 S55 28 58 28 L60 32%22 stroke=%22%2300ffff%22 stroke-width=%222.5%22 fill=%22none%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22/><path d=%22M6 32 C9 32 10 26 13 26 S17 38 19 38 S22 20 25 20 S28 44 30 44 S33 14 36 14 S39 48 41 48 S44 22 47 22 S50 40 52 40 S55 28 58 28 L60 32%22 stroke=%22%23eeffff%22 stroke-width=%221%22 fill=%22none%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22/></g></svg>">

    <!-- Social Media Meta Tags -->
    <meta name="description"
        content="Reshka - A handsfree transcription tool with voice activity detection and AI rephrasing capabilities.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://charstorm.github.io/reshka/">
    <meta property="og:title" content="Reshka - Handsfree Transcription">
    <meta property="og:description"
        content="A handsfree transcription tool with voice activity detection and AI rephrasing capabilities. Speak freely, get clean text.">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary">
    <meta property="twitter:url" content="https://charstorm.github.io/reshka/">
    <meta property="twitter:title" content="Reshka - Handsfree Transcription">
    <meta property="twitter:description"
        content="A handsfree transcription tool with voice activity detection and AI rephrasing capabilities. Speak freely, get clean text.">

    <!-- Bootstrap 5.3.8 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome 6.5.1 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Google Fonts: Orbitron, Share Tech Mono, Rajdhani -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;500;600&family=Orbitron:wght@400;600;700&family=Rajdhani:wght@400;500;600&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Control Panel -->
        <div class="control-panel">
            <!-- App Title with Subtitle -->
            <div class="app-title">
                <div class="main-title">Reshka</div>
                <div class="subtitle">Handsfree Transcription</div>
            </div>

            <!-- Status Indicator (Centered) -->
            <div class="status-indicator">
                <span class="status-dot ready" id="statusDot"></span>
                <span id="statusText">Ready</span>
            </div>

            <!-- All Buttons Group (Right) -->
            <div class="action-icons">
                <!-- Start Button -->
                <button class="btn btn-toggle" id="toggleBtn" onclick="toggleTranscription()">
                    <i class="fas fa-play me-2"></i>Start
                </button>

                <button class="btn btn-icon" id="rephraseBtn" data-bs-toggle="tooltip" title="Rephrase Transcript"
                    onclick="rephraseTranscript()">
                    <i class="fas fa-magic"></i>
                </button>

                <button class="btn btn-icon" id="viewRephraseBtn" data-bs-toggle="tooltip" title="View Last Rephrased"
                    onclick="showRephraseModal()">
                    <i class="fas fa-eye"></i>
                </button>

                <div class="nav-links">
                    <a href="index.html" class="nav-link-btn active" data-bs-toggle="tooltip" title="Transcription"><i class="fas fa-microphone"></i></a>
                    <a href="config.html" class="nav-link-btn" data-bs-toggle="tooltip" title="Configuration"><i class="fas fa-cog"></i></a>
                    <a href="prompts.html" class="nav-link-btn" data-bs-toggle="tooltip" title="Prompts"><i class="fas fa-pen"></i></a>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="content-area">
            <!-- Left Column: Activity Log + Questions -->
            <div class="left-column">
                <div class="log-panel">
                    <div class="panel-header">
                        <span><i class="fas fa-list-alt me-2"></i>Activity Log</span>
                        <button class="btn-clear-log" data-bs-toggle="tooltip" title="Clear Activity Log"
                            onclick="clearActivityLog()">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                    <div class="panel-content log-content" id="logArea">
                    </div>
                </div>

                <div class="speech-timer-panel" id="speechTimerPanel">
                    <div class="speech-timer-bar-track">
                        <div class="speech-timer-bar-fill" id="speechTimerFill"></div>
                    </div>
                    <span class="speech-timer-counter" id="speechTimerCounter">00:00</span>
                </div>

                <div class="questions-panel">
                    <div class="panel-header">
                        <span><i class="fas fa-question-circle me-2"></i>Questions <span style="font-family: 'Rajdhani', sans-serif; font-weight: 500; font-size: 0.75rem; color: var(--accent-dim); letter-spacing: 0;">(say "generate questions")</span></span>
                        <div class="questions-header-actions">
                            <button class="btn-clear-log" title="Generate Questions" onclick="generateQuestions()">
                                <i class="fas fa-bolt"></i>
                            </button>
                            <button class="btn-clear-log" title="Clear Questions" onclick="clearQuestions()">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div class="panel-content questions-content" id="questionsArea">
                        <div class="text-muted fst-italic" style="font-size: 0.85rem;">
                            No questions generated yet. Click âš¡ or say "generate questions".
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Pane: Transcription (70%) -->
            <div class="transcript-panel">
                <div class="panel-header transcription-header">
                    <div class="header-title-group">
                        <span class="panel-title"><i class="fas fa-file-alt me-2"></i>Transcription</span>
                        <button class="btn btn-icon-header" id="copyBtn" data-bs-toggle="tooltip"
                            title="Copy Transcript" onclick="copyTranscript()">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <button class="btn btn-icon-header btn-delete" id="clearBtn" data-bs-toggle="tooltip"
                        title="Clear Transcript" onclick="clearTranscript()">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="panel-content transcript-content" id="transcriptArea" contenteditable="true"></div>
            </div>
        </div>
    </div>

    <!-- Rephrase Modal -->
    <div class="modal fade" id="rephraseModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Rephrased Content</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Hidden raw markdown for copying -->
                    <div id="rephraseRawContent" style="display: none;"></div>
                    <!-- Visible rendered markdown -->
                    <div class="border rounded p-3"
                        style="min-height: 200px; max-height: 400px; overflow-y: auto; background-color: #1a2233;" id="rephraseContent">
                        <div class="text-muted fst-italic">No rephrased content yet...</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-outline-primary" onclick="copyRephrase()">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button type="button" class="btn btn-primary" onclick="rephraseTranscript()">
                        <i class="fas fa-redo"></i> Rephrase Again
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5.3.8 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Silero VAD Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.22.0/dist/ort.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@latest/dist/bundle.min.js"></script>

    <script src="script.js"></script>
</body>

</html>